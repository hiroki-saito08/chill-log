import{q as x,e as v,C as y,o as r,c as d,b as k,a as s,t as n,k as c,i as P,d as _,j as f,u as o,A as C,F as B,z as V,p as I,l as M}from"./app-9e071959.js";import{T as S}from"./Toast-36deffb8.js";import{_ as E}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css            */const t=m=>(I("data-v-2ad949dc"),m=m(),M(),m),N={class:"profile"},T=t(()=>s("h3",null,"Profile",-1)),U={key:0,class:"text-center mt-5"},F=["src"],D={key:1,class:"profile-pic text-center mt-3"},j={class:"d-flex justify-content-center"},$={class:"card p-4 w-100",style:{"max-width":"600px"}},q={class:"row mb-2"},z=t(()=>s("div",{class:"col-4 fw-bold text-start"},"Name:",-1)),A={class:"col-8 text-start"},G={class:"row mb-2"},H=t(()=>s("div",{class:"col-4 fw-bold text-start"},"Email:",-1)),J={class:"col-8 text-start"},K={class:"row mb-2 bio-text"},L=t(()=>s("div",{class:"col-4 fw-bold text-start"},"Bio:",-1)),O={class:"col-8 text-start"},Q={key:0,class:"mb-3"},R=["src"],W={key:0,class:"modal-backdrop-custom"},X={class:"modal d-block",tabindex:"-1"},Y={class:"modal-dialog modal-dialog-centered modal-lg"},Z={class:"modal-content"},ss=t(()=>s("h5",{class:"modal-title"},"Edit Profile",-1)),es={class:"modal-body"},os={class:"mb-3"},ts=t(()=>s("label",{for:"name"},"Name",-1)),as={key:0,class:"text-danger mt-1"},ls={class:"mb-3"},is=t(()=>s("label",{class:"form-label"},"Bio",-1)),rs={class:"form-check mt-1"},ds=t(()=>s("label",{class:"form-check-label",for:"clearBio"},"Clear bio (delete)",-1)),ns={key:0,class:"text-danger"},cs={class:"mb-4"},_s=t(()=>s("h4",{class:"form-label"},"Profile Image (Max:2MB)",-1)),ms={key:0,class:"text-danger"},us={class:"password-edit mt-4"},ps=t(()=>s("h4",null,"Password",-1)),fs={class:"mt-4 mb-4"},bs=t(()=>s("label",{class:"form-label"},"New Password",-1)),hs={key:0,class:"text-danger"},vs={class:"mb-3"},ws=t(()=>s("label",{class:"form-label"},"Confirm Password",-1)),gs=t(()=>s("button",{type:"submit",class:"btn"},"Save Changes",-1)),xs={__name:"Profile",setup(m){const i=x(()=>V().props.auth.user),u=v(!1),b=v(null),e=y({name:i.name,bio:i.bio??"",clear_bio:!1,profile_image:null,new_password:"",new_password_confirmation:""});function w(p){e.profile_image=p.target.files[0]}function g(){e.post(route("mypage.update"),{forceFormData:!0,onSuccess:()=>{u.value=!1,b.value.triggerToast("Profile updated successfully")},onError:p=>{b.value.triggerToast(p,"error")}})}function h(){u.value=!1,e.reset()}return(p,a)=>(r(),d(B,null,[k(S,{ref_key:"toast",ref:b},null,512),s("div",N,[T,i.value.profile_image?(r(),d("div",U,[s("img",{src:`/storage/${i.value.profile_image}`,alt:"Profile Image",class:"profile-pic"},null,8,F)])):(r(),d("div",D)),s("div",j,[s("div",$,[s("div",q,[z,s("div",A,n(i.value.name),1)]),s("div",G,[H,s("div",J,n(i.value.email),1)]),s("div",K,[L,s("div",O,n(i.value.bio),1)]),i.value.profile_image_url?(r(),d("div",Q,[s("img",{src:i.value.profile_image_url,class:"img-thumbnail",alt:"Profile Image",style:{"max-width":"200px"}},null,8,R)])):c("",!0),s("button",{class:"btn mt-5",onClick:a[0]||(a[0]=l=>u.value=!0)},"Edit Profile")])])]),u.value?(r(),d("div",W,[s("div",X,[s("div",Y,[s("div",Z,[s("div",{class:"modal-header"},[ss,s("button",{type:"button",class:"btn-close",onClick:h})]),s("div",es,[s("form",{onSubmit:P(g,["prevent"]),enctype:"multipart/form-data"},[s("div",os,[ts,_(s("input",{type:"text",id:"name","onUpdate:modelValue":a[1]||(a[1]=l=>o(e).name=l),placeholder:"Enter your name",class:"form-control"},null,512),[[f,o(e).name]]),o(e).errors.name?(r(),d("div",as,n(o(e).errors.name),1)):c("",!0)]),s("div",ls,[is,_(s("textarea",{"onUpdate:modelValue":a[2]||(a[2]=l=>o(e).bio=l),class:"form-control",rows:"3"},null,512),[[f,o(e).bio]]),s("div",rs,[ds,_(s("input",{type:"checkbox",class:"form-check-input",id:"clearBio","onUpdate:modelValue":a[3]||(a[3]=l=>o(e).clear_bio=l)},null,512),[[C,o(e).clear_bio]])]),o(e).errors.bio?(r(),d("div",ns,n(o(e).errors.bio),1)):c("",!0)]),s("div",cs,[_s,s("input",{type:"file",onChange:w,class:"form-control"},null,32),o(e).errors.profile_image?(r(),d("div",ms,n(o(e).errors.profile_image),1)):c("",!0)]),s("div",us,[ps,s("div",fs,[bs,_(s("input",{type:"password","onUpdate:modelValue":a[4]||(a[4]=l=>o(e).new_password=l),class:"form-control"},null,512),[[f,o(e).new_password]]),o(e).errors.new_password?(r(),d("div",hs,n(o(e).errors.new_password),1)):c("",!0)]),s("div",vs,[ws,_(s("input",{type:"password","onUpdate:modelValue":a[5]||(a[5]=l=>o(e).new_password_confirmation=l),class:"form-control"},null,512),[[f,o(e).new_password_confirmation]])])]),s("div",{class:"modal-footer px-0"},[s("button",{type:"button",class:"btn cancel-btn",onClick:h},"Cancel"),gs])],32)])])])])])):c("",!0)],64))}},Bs=E(xs,[["__scopeId","data-v-2ad949dc"]]);export{Bs as default};
